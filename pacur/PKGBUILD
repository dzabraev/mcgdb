targets=(
#    "archlinux"
#    "centos"
#    "debian"
#    "fedora"
    "ubuntu"
)
pkgname="mcgdb"
pkgver="1.2"
pkgrel="1"
pkgdesc="midnight commander as gdb front end"
pkgdesclong=(
    "midnight commander as gdb front end"
)
maintainer="Maxim Dzabraev <dzabraew@gmail.com>"

arch="all"
license=("GPLv3")
section="utils"
priority="optional"
url="https://github.com/dzabraev/${pkgname}"
sources=(
    "https://github.com/dzabraev/mcgdb/releases/download/${pkgver}/mcgdb-${pkgver}.tar.gz"
)
hashsums=(
    "42abc661c8aec2a9e284a84482184772"
)

depends:apt=(
  "libglib2.0-dev"
  "libslang2-dev"
)

build:apt() {
    wget http://www.digip.org/jansson/releases/jansson-2.10.tar.gz
    tar xzvf jansson-2.10.tar.gz
    mkdir obj-jansson
    cd obj-jansson
    make -j4
    make install

    apt-get -y install libglib2.0-dev libslang2-dev
    tar xzvf "mcgdb-${pkgver}.tar.gz"
    cd "mcgdb-${pkgver}"
    mkdir obj-mcgdb
    cd obj-mcgdb
    ../configure
    make -j4
#    mkdir -p "go/src"
#    export GOPATH="${srcdir}/go"
#    mv "${pkgname}-${pkgver}" "go/src"
#    cd "go/src/${pkgname}-${pkgver}"
#    go get
#    go build -a
}

package() {
    make install DESTDIR=${pkgdir}
}